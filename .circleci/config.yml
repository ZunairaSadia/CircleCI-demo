version: 2.1

jobs:
  test:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run:
          name: Run tests
          command: echo 'No tests available for HTML project'

  build:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run:
          name: Prepare for Deployment
          command: |
            echo 'Preparing for deployment'
            mkdir -p deploy
           
            rm -rf deploy/.git

  deploy:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run:
          name: Deploy to GitHub Pages
          command: |
            git config --global user.email "zunaira@izylogic.com"
            git config --global user.name "ZunairaSadia"
            git clone --branch main  https://$GITHUB_TOKEN@github.com/ZunairaSadia/CircleCi-demo.git 
            cd CircleCi-demo
            
            git add .
            git commit -m "Deploy updates"
            git push https://$GITHUB_TOKEN@github.com/ZunairaSadia/CircleCi-demo.git 

workflows:
  version: 2
  example:
    jobs:
      - test
      - build:
          requires:
            - test
      - deploy:
          requires:
            - build
